<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

        <title>Installing Raspberry Pi OS on SD card</title>

        <link rel="stylesheet" href="/css/stylesheet.css">
        <link rel="stylesheet" href="/css/custom.css">
        <link rel="icon" type="image/png" href="/img/favicon.ico">

        <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    </head>
    <body>
        <section id="page-title">
            <h1><a href="/">Chris LaBarge</a></h1>
        </section>
        <div class="content">


<section class="blog-post">
    
    <img class="header-img" src="/img/pi.jpg" />
    
    <h1>Installing Raspberry Pi OS on SD card</h1>
    <div class="blog-post-subheader">
        
            <span class="date-title">
                February 27, 2017
            </span>
        
        
    </div>
    <div class="blog-post-content">
        

<h2 id="overview">Overview</h2>

<p>A <a href="https://www.raspberrypi.org/">Raspberry Pi</a> is an $35 dollar computer that is the size of a credit card.
It can be utilized in everything from <a href="https://pimylifeup.com/category/projects/">DIY home projects</a> to <a href="https://www.reddit.com/r/raspberry_pi/comments/5c2f6d/raspberry_pi_spotted_in_ukrainian_missile/">missle guidence systems</a>.</p>

<p>This tutorial will demonstrate the process of installing an operating system on the device.
Although it is aimed at beginners, we will be using the command line.  Don&rsquo;t worry though,
the goal is to ease newbies into command line, as you are sure to come across it
again and again in future raspberry pi endeavers.</p>

<h2 id="items-needed">Items Needed</h2>

<p>For this tutorial you will need the following items&hellip;</p>

<ul>
<li>Computer with OSX (Unix) or Linux installed</li>
<li>Raspberry Pi</li>
<li>MicroSD card (4gb minimum)</li>
<li>SD adapter (comes with the microSD card)</li>
<li>SD card reader (internal or external)</li>
</ul>

<h3 id="step-1-choose-an-operating-system">Step 1. Choose an operating system</h3>

<p>Although there are many different raspberry pi operating systems (aka distributions) that range in functionality, the
installation process of these operating systems are for the most part, all the same.</p>

<p>For this tutorial we will be installing the <a href="https://retropie.org.uk/download/">RetroPi OS</a>, which turns the Pi into a emulation station for gaming.</p>

<h3 id="step-2-download-and-extract-the-operating-system">Step 2. Download and Extract the operating system</h3>

<p>From your OSX or Linux computer, download and extract the .img file of the operating system you will be installing.</p>

<h3 id="step-3-find-the-pathname-of-the-extracted-image-file">Step 3. Find the pathname of the extracted Image file.</h3>

<p>Everything on a computer is a file. And all of these files have pathnames.  One way to discover the pathname is as follows..</p>

<p>Right click on the extracted Image (.img) file from STEP 2 and select &ldquo;Get Info&rdquo; (OSX) or &ldquo;Properties&rdquo; (Linux).
Within the window that pops up, under &ldquo;Where:&rdquo; for OSX you will see a pathname that looks similar to this
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	/Users/chris/Downloads/the_file_name.img</code></pre></div></p>

<p>For Linux users, under &ldquo;Location:&rdquo; you will see a pathname that looks similar to this
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	/home/chris/Downloads/the_file_name.img</code></pre></div>
On your computer ‘chris’ will be replaced with your username, ‘Downloads’ will be replaced with whichever folder the .img file is contained in.</p>

<p>We will need this pathname later in the tutorial, so copy it down.</p>

<h3 id="step-4-connect-the-microsd-card-to-your-computer">Step 4. Connect the microSD card to your computer</h3>

<p>Insert the microSD card into the SD adapter.
Plug the SD adapter card into the SD card reader.
If the card reader is external, you may now plug the card reader into the computer.</p>

<h3 id="step-5-find-the-sd-card-partition-pathname">Step 5. Find the SD card partition pathname</h3>

<p>Now we must find the pathname of the SD card <a href="https://en.wikipedia.org/wiki/Disk_partitioning">partition</a> (aka region).
So how would go about repeating process in Step 3 and right clicking the SD card reader file?</p>

<p>Well we could try sifting through system folders with the mouse to find the correct file, but that would take too long.
The computer can just tell us the pathname if we ask it.</p>

<p>This is where the command line comes in.  Now don’t be scared.  Although the command line can be intimidating, it is fairly easy to use.</p>

<p>We can use the command line to tell the computer to do things.
In this case, will will be entering a command that tells the computer to display information for us.</p>

<p>Open the Terminal application on your computer.  Here is the command we are going to type into the terminal (aka command line)
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	sudo fdisk -l</code></pre></div></p>

<p>Lets break down this command.</p>

<p>&ldquo;sudo&rdquo; stands for superuser, and it gives us &ldquo;superuser&rdquo; privileges in order to have access to the &ldquo;fdisk&rdquo; command.</p>

<p>&ldquo;fdisk&rdquo; stands for &ldquo;fixed disks&rdquo;.</p>

<p>The &ldquo;-l&rdquo; at the end of the command stands for &ldquo;List&rdquo;, and is a &ldquo;fdisk&rdquo; option flag.</p>

<p>If you want a closer look at the capabilities of the commands, you can type &ldquo;man&rdquo; (manual) + the command.
For instance
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	man sudo</code></pre></div>
will show us all of the capabilities of &ldquo;sudo&rdquo; and how to use it.  You can do the same for &ldquo;fdisk&rdquo;.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	man fdisk</code></pre></div>
Do yourself a favor and scroll through the manual pages for each command and take note of the format similarities.
All &ldquo;man&rdquo; (manual) pages for commands will be in this format.
So if you are ever unsure of how a command works, just read up on it using &ldquo;man&rdquo;.</p>

<p>Alright so now that you know what the command is doing, type out the full command and press enter.</p>

<p>Because we used &ldquo;sudo&rdquo; (superuser) in this command, it will ask for a password. Type your username’s password and press enter.
(The traditional dots or ‘*’ asterisk that appear when you type your password will not do so in the command line. This is normal.)</p>

<p>You should now see a list of columns. Look for the column with the header labeled &ldquo;Size&rdquo;
and look the corresponding amount that your SD card has available on it. The size will
usually be a couple hundred megabytes less then the full capacity of the card. So for
instance I am formatting a 8gb SD card and it shows up in the size column as 7.2gb. The
column with the header labled &ldquo;Device&rdquo; is the pathname of the card partition.</p>

<p>If the card reader is external the pathname should look similar to
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/dev/sdc1</code></pre></div>
If it is internal the pathname should look similar to
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/dev/mmcblk0p1</code></pre></div></p>

<p>This is the file pathname for the partition on the SD card. Copy down
this path name which will be used in the following step.</p>

<h3 id="step-6-unmount-the-sd-card">Step 6. Unmount the SD card</h3>

<p>Before we can format the card in the next step, we must unmount it. This is accomplished by entering another command in the (not so scary) command line.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo umount the_pathname_from_step5</code></pre></div>
So the command for this demonstration will be
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo umount /dev/mmcblk0p1</code></pre></div></p>

<h3 id="step-7-format-the-sd-card">Step 7. Format the SD card</h3>

<p>In order to format the SD card, we will need the pathname of the SD card reader.  Fortunetly, this is as easy as
modifying the pathname used in the last step.  For external card readers remove the last character from the pathname.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/dev/sdc1</code></pre></div>
Turns into
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/dev/sdc</code></pre></div>
For internal readers, remove the last 2 characters. ‘/dev/mmcblk0p1’ turns to ‘/dev/mmcblk0’.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/dev/mmcblk0p1</code></pre></div>
Turns into
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/dev/mmcblk0</code></pre></div></p>

<p>Now that we have the pathname of the SD card reader, it is time to format the card.  The command is
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo fdisk the_pathname</code></pre></div>
So for this demonstration I will enter
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo fdisk /dev/mmcblk0</code></pre></div></p>

<p>Once you enter the command it may ask for your password again (because we are using &ldquo;sudo&rdquo;).</p>

<p>You should now see a menu for &ldquo;fdisk&rdquo; within the command line.
Now you can enter menu commands. As you can see, if we type and enter ‘m’, we will be shown the help menu.  This displays all of the available commands we can enter within the &ldquo;fdisk&rdquo; menu. We first are going to delete any existing partitions on the SD card.  We do this by entering the simple command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">d</code></pre></div>
My card had 2 existing partitions so after I entered the above command I saw the below screen.</p>

<p>SCREEN HERE</p>

<p>It tells me there are 2 partitions on the card and the default partition is 2. It wants me to tell it which one to delete by entering either &ldquo;1&rdquo;, &ldquo;2&rdquo;, or nothing at all (since the default is 2). I will enter 2, although I could just press enter and I should see the same screen as below.</p>

<p>SCREEN</p>

<p>In order to delete the last partition enter the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">d</code></pre></div>
one more time.  Since there is only one left we should automatically be presented with the prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Partition <span style="color:#ae81ff">1</span> has been deleted</code></pre></div></p>

<p>We will now add a new partition to the SD card.</p>

<p>This is accomplished by entering the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">n</code></pre></div>
(Remember you can see where these commands are coming from by entering &ldquo;m&rdquo; for the help menu)
We will now be presented with the following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Partition type
   p   primary <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span> primary, <span style="color:#ae81ff">0</span> extended, <span style="color:#ae81ff">4</span> free<span style="color:#f92672">)</span>
   e   extended <span style="color:#f92672">(</span>container <span style="color:#66d9ef">for</span> logical partitions<span style="color:#f92672">)</span></code></pre></div>
The prompt asks for the &ldquo;Partition Type&rdquo; and the options are &ldquo;p&rdquo; for primary and &ldquo;e&rdquo; for extended.
We want this new partition to be primary so enter the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">p</code></pre></div>
We will now be presented with following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Partition number <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span>-4, default <span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>:</code></pre></div>
Enter
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ae81ff">1</span></code></pre></div>
We will now be presented with following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">First sector <span style="color:#f92672">(</span><span style="color:#ae81ff">2048</span>-15130623, default <span style="color:#ae81ff">2048</span><span style="color:#f92672">)</span>:</code></pre></div>
Just press enter without typing anything else, for the default 2048 selection.
We will now be presented with following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Last sector, +sectors or +size<span style="color:#f92672">{</span>K,M,G,T,P<span style="color:#f92672">}</span> <span style="color:#f92672">(</span><span style="color:#ae81ff">2048</span>-15130623, default <span style="color:#ae81ff">15130623</span><span style="color:#f92672">)</span>:</code></pre></div>
Just press enter without typing anything else, for the default 15130623 selection.
(Feel free to read up more on <a href="https://en.wikipedia.org/wiki/Master_boot_record">sectors</a>)</p>

<p>We will be presented with following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Created a new partition <span style="color:#ae81ff">1</span> of type <span style="color:#e6db74">&#39;Linux&#39;</span> and of size <span style="color:#ae81ff">7</span>.2 GiB.</code></pre></div></p>

<p>Beautiful! Except we want the partition type to be &ldquo;FAT32&rdquo; not &ldquo;Linux&rdquo;.  We can do this by entering the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">t</code></pre></div></p>

<p>We will be presented with following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Selected partition <span style="color:#ae81ff">1</span>
Partition type <span style="color:#f92672">(</span>type L to list all types<span style="color:#f92672">)</span>:</code></pre></div>
Enter the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">L</code></pre></div>
We will be presented with all of the different foramt types. W95 FAT32 is the format we are looking for.  On my machine it is toward the beginning of the list. Once you find it, take note of the code beside it (mine is &ldquo;b&rdquo;).</p>

<p>Type the code that was beside &ldquo;W95 FAT32&rdquo; and press enter.
In my case
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">b</code></pre></div>
Now enter the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">p</code></pre></div>
We should see that the newly created partition has a type of &ldquo;W95 FAT32&rdquo;.</p>

<p>Now we must write all of our changed to the card in order to finalize the formatted partition. Enter the command
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">w</code></pre></div>
We will be presented with following prompt
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">The partition table has been altered.
Calling ioctl<span style="color:#f92672">()</span> to re-read partition table.
Syncing disks.</code></pre></div>
Success!  It will exit out of the &lsquo;fdisk&rsquo; program after writing.  Now for the last step in formatting the card. We must create a file system on the new clean partition we just created on the SD card.  This is accomplished with the commmand
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo mkfs.vfat partition_pathname_from_step5</code></pre></div>
So the command I entered is
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo mkfs.vfat /dev/mmcblk0p1</code></pre></div></p>

<h3 id="step-8-install-the-img-file-onto-the-sd-card">Step 8. Install the .img file onto the SD card</h3>

<p>Now for the last and final step of the tutorial.  To install the the operating system onto the SD card we will need the
pathname of the Image (.img) file from step 3, and the pathname from the card reader (the modified partition pathname) from the beginning of step 7.</p>

<p>The command will be</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo dd bs<span style="color:#f92672">=</span>1M <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>image_pathname of<span style="color:#f92672">=</span>card_reader_device_pathname</code></pre></div>

<p>Note, if you are on a OSX(Unix) computer, the above &ldquo;M&rdquo; command will need to be lowercase &ldquo;m&rdquo; instead.</p>

<p>This is the command I entered
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo dd bs<span style="color:#f92672">=</span>1M <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>home/chris/Downloads/retro_pi.img of<span style="color:#f92672">=</span>/dev/mmcblk0</code></pre></div></p>

<p>Once you have entered the correct command, the installation will begin. This take a while and you will just see a blinking cursor. As long as it&rsquo;s blinking that means it is writing the Image (.img) file to the SD card. On my machine it was almost 5 minutes per gigabyte.  So just hang in there!!</p>

<h2 id="conclusion">Conclusion</h2>

<p>Once the installation is complete, you can eject the SD card from your computer and insert the microSD card into your Raspberry Pi.  And if everything goes well, you should witness your Pi boot up with installed operating system. Congradulations!  You just installed a operating system using only the command line, that wasn&rsquo;t so hard was it?</p>

<p>If you have any questions, issues, or advice, please send me an email and I will be more then happy to respond.</p>

    </div>
</section>

        </div>
        <div class="footer">
            <div class="contact-options">
                <div class="social-icons">
                    <a href="https://github.com/chrislabarge">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="mailto:chrislabargedev@gmail.com">
                        <i class="far fa-envelope"></i>
                    </a>
                </div>
            </div>

            
                <section id=nav>
                    <ul class=navbar>
                        <li><div><a href="/">Home</a></div></li>
                        <li><div><a href="/about">About Me</a></div></li>
                        <li><div><a href="/projects">Projects</a></div></li>
                        <li><div><a href="/posts">Blog</a></div></li>
                    </ul>
                </section>
            
        </div>
    </body>
</html>

